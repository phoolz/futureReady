@using FutureReady.Models
@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
    var isSiteAdmin = User.IsInRole(Roles.SiteAdmin);
    var isTeacher = User.IsInRole(Roles.Teacher);
}

<nav id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <a asp-controller="Home" asp-action="Index" class="sidebar-brand">
            <span class="brand-icon">ğŸ“</span>
            <span class="brand-text">FutureReady</span>
        </a>
        <button class="sidebar-toggle d-lg-none" type="button" onclick="toggleSidebar()">
            <span>&times;</span>
        </button>
    </div>

    <ul class="sidebar-nav">
        <li class="nav-item">
            <a class="nav-link @(currentController == "Home" && currentAction == "Index" ? "active" : "")"
               asp-controller="Home" asp-action="Index">
                <span class="nav-icon">ğŸ“Š</span>
                <span class="nav-text">Dashboard</span>
            </a>
        </li>

        @if (isSiteAdmin)
        {
            @* Site Admin Menu Items *@
            <li class="nav-item">
                <a class="nav-link @(currentController == "Schools" ? "active" : "")"
                   asp-controller="Schools" asp-action="Index">
                    <span class="nav-icon">ğŸ«</span>
                    <span class="nav-text">Schools</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link @(currentController == "Users" && currentAction != "Profile" ? "active" : "")"
                   asp-controller="Users" asp-action="Index">
                    <span class="nav-icon">ğŸ‘¥</span>
                    <span class="nav-text">Users</span>
                </a>
            </li>
        }
        else if (isTeacher)
        {
            @* Teacher Menu Items *@
            <li class="nav-item">
                <a class="nav-link @(currentController == "Students" ? "active" : "")"
                   asp-controller="Students" asp-action="Index">
                    <span class="nav-icon">ğŸ‘¥</span>
                    <span class="nav-text">Students</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link @(currentController == "Companies" ? "active" : "")"
                   asp-controller="Companies" asp-action="Index">
                    <span class="nav-icon">ğŸ¢</span>
                    <span class="nav-text">Companies</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link @(currentController == "Placements" ? "active" : "")"
                   asp-controller="Placements" asp-action="Index">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span class="nav-text">Placements</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link @(currentController == "Supervisors" ? "active" : "")"
                   asp-controller="Supervisors" asp-action="Index">
                    <span class="nav-icon">ğŸ‘”</span>
                    <span class="nav-text">Supervisors</span>
                </a>
            </li>
        }
    </ul>

    <div class="sidebar-footer">
        <ul class="sidebar-nav">
            <li class="nav-item">
                <a class="nav-link @(currentController == "Users" && currentAction == "Profile" ? "active" : "")"
                   asp-controller="Users" asp-action="Profile">
                    <span class="nav-icon">âš™ï¸</span>
                    <span class="nav-text">Settings</span>
                </a>
            </li>
            @if (User?.Identity?.IsAuthenticated ?? false)
            {
                <li class="nav-item user-info">
                    <span class="nav-link">
                        <span class="nav-icon">ğŸ‘¤</span>
                        <span class="nav-text">@User.Identity.Name</span>
                    </span>
                </li>
                <li class="nav-item">
                    <form asp-controller="Authentication" asp-action="Logout" method="post">
                        <button type="submit" class="nav-link logout-btn">
                            <span class="nav-icon">ğŸšª</span>
                            <span class="nav-text">Logout</span>
                        </button>
                    </form>
                </li>
            }
            else
            {
                <li class="nav-item">
                    <a class="nav-link" asp-controller="Authentication" asp-action="Login">
                        <span class="nav-icon">ğŸ”‘</span>
                        <span class="nav-text">Login</span>
                    </a>
                </li>
            }
        </ul>
    </div>
</nav>

<div class="sidebar-overlay d-lg-none" onclick="toggleSidebar()"></div>
